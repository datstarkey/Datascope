(this.webpackJsonpclientapp=this.webpackJsonpclientapp||[]).push([[0],{152:function(e,t,a){e.exports=a(286)},157:function(e,t,a){},158:function(e,t,a){},286:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),s=(a(157),a(158),a(35)),i=a(38),l=a.n(i),u=a(59);function m(){return(m=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/GamesList");case 2:return t=e.sent,e.prev=3,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(3),console.log(t),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function p(){return(p=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/GamesList",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.ok);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/GamesList",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.ok);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=r.a.createContext({}),h=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),u=Object(s.a)(l,2),m={authenticated:o,setAuthenticated:i,bearer:u[0],setBearer:u[1]};return r.a.createElement(f.Provider,{value:m}," ",t," ")},g=a(147),b=a(63),E=a(294),y=function(e,t){E.a.success({message:e,description:t,placement:"bottomRight"})},j=function(e,t){E.a.error({message:e,description:t,placement:"bottomRight"})},O=a(293),v=a(289),k=a(47),w=a(291),C=a(292),S=a(288),x=a(52),L=a.n(x),A=function(e){var t=Object(n.useContext)(f).bearer||"",a=O.a.TextArea,c={},o=v.a.useForm(),i=Object(s.a)(o,1)[0],l=Object(n.useState)(!1),u=Object(s.a)(l,2),m=u[0],d=u[1],h=Object(n.useState)(c),E=Object(s.a)(h,2),x=E[0],A=E[1],T=Object(n.useState)(!1),N=Object(s.a)(T,2),D=N[0],F=N[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{type:"primary",className:"button-success",onClick:function(){e.update?(i.setFieldsValue(e.game),A(e.game)):(i.resetFields(),A(c)),d(!0)},id:"modal-open-button"},e.title?e.title:"Add New Game"),r.a.createElement(w.a,{title:"Update or Add Game",visible:m,onOk:function(){i.validateFields().then((function(){F(!0),function(e,t){return p.apply(this,arguments)}(x,t).then((function(t){t?e.update?y("Success","Game updated successfully"):y("Success","Game added successfully"):j("Error","Could not connect to database, please check connection"),e.refreshList(),F(!1),d(!1)}))})).catch((function(){}))},confirmLoading:D,onCancel:function(){return d(!1)}},r.a.createElement(v.a,{form:i,labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",onValuesChange:function(e){var t=Object(b.a)(Object(b.a)({},x),e);A(t)}},r.a.createElement(v.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Game name cannot be blank"}]},r.a.createElement(O.a,{id:"name-input"})),r.a.createElement(v.a.Item,{label:"Description",name:"description",rules:[{required:!0,message:"Description cannot be blank"}]},r.a.createElement(a,{id:"description-input"})),r.a.createElement(v.a.Item,{label:"Rating",name:"rating",rules:[{required:!0,message:"Must submit a rating"}]},r.a.createElement(C.a,{id:"rating-input"},Object(g.a)(Array(10)).map((function(e,t){return r.a.createElement(C.a.Option,{key:t,value:10-t},10-t)})))),r.a.createElement(v.a.Item,{label:"Release Date",rules:[{required:!0,message:"Must submit a release date"}]},r.a.createElement(S.a,{id:"release-input",value:L()(x.releaseDate),onChange:function(e){var t=Object(b.a)({},x);t.releaseDate=e,A(t)}})))))},T=a(290),N=function(e){var t,a=Object(n.useContext)(f),c=a.bearer||"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{title:e.game.name,className:"card-width",headStyle:{color:"white",background:"#002766"},bodyStyle:{background:"#fafafa"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:{width:100}},r.a.createElement("p",null,"Rating : ")),r.a.createElement("td",null,r.a.createElement("p",{id:"rating"},e.game.rating))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("p",null,"Release Date : ")),r.a.createElement("td",null,r.a.createElement("p",{id:"release-date"},(t=e.game.releaseDate,new Date(t).toDateString())))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("p",null,"Description : ")),r.a.createElement("td",null,r.a.createElement("p",{id:"description",style:{fontSize:11}},e.game.description))))),a.authenticated&&r.a.createElement(A,{update:!0,game:e.game,title:"Edit",refreshList:e.refreshList}),a.authenticated&&r.a.createElement(k.a,{type:"primary",danger:!0,style:{marginLeft:5},onClick:function(){(function(e,t){return d.apply(this,arguments)})(e.game,c).then((function(t){t?(y("Success","Game deleted successfully"),e.refreshList()):j("Error","Could not connect to database, please check connection")}))}},"Delete")))},D=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),l=i[0],u=i[1],p=Object(n.useContext)(f),d=function(){(function(){return m.apply(this,arguments)})().then((function(e){u(!0),c(e)}))};return Object(n.useEffect)((function(){return d()}),[]),r.a.createElement(r.a.Fragment,null,p.authenticated&&r.a.createElement("div",{style:{marginLeft:"2rem"}},r.a.createElement(A,{refreshList:d,"data-testid":"new-game-button"})),l?r.a.createElement("h3",{style:{marginLeft:"2rem",marginTop:"2rem"}},"The List"):r.a.createElement("h3",null,"Fetching list"),r.a.createElement("div",{className:"grid","data-testid":"game-grid"},a.map((function(e,t){return r.a.createElement("div",{key:t,className:"grid-item",id:"grid-item-".concat(t)},r.a.createElement(N,{game:e,refreshList:function(){return d()}}))}))))},F=a(295),B=a(70);function G(){return(G=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/login/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a.ok);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/login/refresh",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e){var t=new B.a,a=v.a.useForm(),c=Object(s.a)(a,1)[0],o=Object(n.useState)(!1),i=Object(s.a)(o,2),l=i[0],u=i[1],m=Object(n.useState)(!1),p=Object(s.a)(m,2),d=p[0],h=p[1],g=Object(n.useState)({}),E=Object(s.a)(g,2),C=E[0],S=E[1],x=Object(n.useContext)(f),L=function(){c.validateFields().then((function(){h(!0),function(e){return I.apply(this,arguments)}(C).then((function(e){return e.json()})).then((function(e){y("Success","Login successful"),x.setAuthenticated&&x.setAuthenticated(!0),x.setBearer&&x.setBearer(e),t.set("token",e),h(!1),u(!1)})).catch((function(e){console.log(e),j("Error","error connecting to server"),h(!1)}))})).catch((function(){}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{type:"primary",style:{float:"right",marginTop:"1rem"},className:"button-success",onClick:function(){return u(!0)},id:"login-modal-button"},e.title),r.a.createElement(w.a,{title:"Login",visible:l,onOk:L,confirmLoading:d,onCancel:function(){return u(!1)},footer:[r.a.createElement(k.a,{danger:!0,onClick:function(){c.validateFields().then((function(){h(!0),console.log(C),function(e){return G.apply(this,arguments)}(C).then((function(e){e?(y("Success","Registration successfull"),h(!1)):(j("Error","Username already exists or error connecting to server"),h(!1))}))})).catch((function(){}))}},"Register"),r.a.createElement(k.a,{key:"back",onClick:function(){return u(!1)}},"Return"),r.a.createElement(k.a,{key:"submit",type:"primary",loading:d,onClick:L},"Submit")]},r.a.createElement(v.a,{form:c,labelCol:{span:6},wrapperCol:{span:14},layout:"horizontal",onValuesChange:function(e){var t=Object(b.a)(Object(b.a)({},C),e);S(t)}},r.a.createElement(v.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Username cannot be blank"}]},r.a.createElement(O.a,{id:"username-input"})),r.a.createElement(v.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Password cannot be blank"}]},r.a.createElement(O.a.Password,{id:"password-input"})),r.a.createElement(v.a.Item,null))))},P=function(){var e=Object(n.useContext)(f),t=new B.a;return r.a.createElement(r.a.Fragment,null,e.authenticated?r.a.createElement(k.a,{style:{float:"right",marginTop:"1rem"},danger:!0,onClick:function(){e.setAuthenticated&&e.setAuthenticated(!1),e.setBearer&&e.setBearer(""),t.remove("token")}},"Logout"):r.a.createElement(J,{title:"Login"}))},q=F.a.Header,z=F.a.Content,U=F.a.Footer;var V=function(){var e=Object(n.useContext)(f),t=new B.a;return Object(n.useEffect)((function(){var a=t.get("token");a&&function(e){return R.apply(this,arguments)}(a).then((function(e){return e.json()})).then((function(a){t.set("token",a),e.setAuthenticated&&e.setAuthenticated(!0),e.setBearer&&e.setBearer(a)})).catch((function(e){console.log(e),t.remove("token")}))}),[]),r.a.createElement(F.a,{className:"layout"},r.a.createElement(q,{style:{background:"#002766"},"data-testid":"header"},r.a.createElement("img",{style:{display:"inline"},src:"/jgl-logo.png",alt:"logo",className:"logo"}),r.a.createElement("h1",{style:{display:"inline",marginLeft:10},className:"alt-color"},"Jakes Gaming List"),r.a.createElement(P,null)),r.a.createElement(z,{style:{padding:"0 50px"},"data-testid":"main-content"},r.a.createElement("div",{className:"site-layout-content"},r.a.createElement(D,null))),r.a.createElement(U,{style:{textAlign:"center"},"data-testid":"footer"},"\xa9 Jake Starkey - Inteded for use as a demonstration Task for Datascope",r.a.createElement(k.a,{href:"https://github.com/datstarkey/Datascope",style:{marginLeft:5}},"Github")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(h,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[152,1,2]]]);
//# sourceMappingURL=main.3f345d1b.chunk.js.map